# FSMContext –∏ –µ–≥–æ –û–±–ª–∞—Å—Ç—å –í–∏–¥–∏–º–æ—Å—Ç–∏: –ö–∞–∫ aiogram –†–∞–∑–¥–µ–ª—è–µ—Ç –î–∞–Ω–Ω—ã–µ

–ö–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º, –∏—Å–ø–æ–ª—å–∑—É—è –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π (FSM), –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –∫–∞–∫ `aiogram` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å–º–µ—à–∞—é—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ –¥—Ä—É–≥–æ–≥–æ? –ö–∞–∫ `state`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ, "–∑–Ω–∞–µ—Ç", –∫ –∫–æ–º—É –æ–Ω –æ—Ç–Ω–æ—Å–∏—Ç—Å—è?

–û—Ç–≤–µ—Ç –∫—Ä–æ–µ—Ç—Å—è –≤ **–º–µ—Ö–∞–Ω–∏–∑–º–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π** –∏ **—É–Ω–∏–∫–∞–ª—å–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** –∫–∞–∂–¥–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.

## –ö–ª—é—á –∫ –ò–∑–æ–ª—è—Ü–∏–∏: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è `user_id` –∏ `chat_id`

`aiogram` –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–Ω —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è **—É–Ω–∏–∫–∞–ª—å–Ω–æ–π –ø–∞—Ä—ã: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + —á–∞—Ç**. –î–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ FSM (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞:

1.  `user_id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram (`message.from_user.id` –∏–ª–∏ `callback_query.from_user.id`).
2.  `chat_id`: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–∞—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (`message.chat.id` –∏–ª–∏ `callback_query.message.chat.id`).

–¢–æ–ª—å–∫–æ —ç—Ç–∞ **–∫–æ–º–±–∏–Ω–∞—Ü–∏—è** –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫ –∫–∞–∫–æ–º—É –∏–º–µ–Ω–Ω–æ –¥–∏–∞–ª–æ–≥—É –æ—Ç–Ω–æ—Å—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM.

## –ê–Ω–∞–ª–æ–≥–∏—è: –ö–∞—Ä—Ç–æ—Ç–µ–∫–∞ –ü—Ä–æ–µ–∫—Ç–æ–≤ üóÑÔ∏è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ **—Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π** (`MemoryStorage`, `RedisStorage` –∏ —Ç.–¥.) ‚Äì —ç—Ç–æ –±–æ–ª—å—à–∞—è **–∫–∞—Ä—Ç–æ—Ç–µ–∫–∞** –∏–ª–∏ —Ñ–∞–π–ª–æ–≤—ã–π —à–∫–∞—Ñ.

* –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç –≤ FSM (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é), –¥–ª—è –Ω–µ–≥–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è **–ü–∞–ø–∫–∞ –ü—Ä–æ–µ–∫—Ç–∞** –≤ —ç—Ç–æ–π –∫–∞—Ä—Ç–æ—Ç–µ–∫–µ.
* –ß—Ç–æ–±—ã –ø–∞–ø–∫–∏ –Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞–ª–∏—Å—å, —É –∫–∞–∂–¥–æ–π –µ—Å—Ç—å **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å (—è—Ä–ª—ã–∫)**. –≠—Ç–æ—Ç —è—Ä–ª—ã–∫ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **–¥–≤—É—Ö —á–∞—Å—Ç–µ–π**: **ID –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –∏ **ID –ß–∞—Ç–∞**. –ù–∞–ø—Ä–∏–º–µ—Ä: `–ü–∞–ø–∫–∞: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å=12345, –ß–∞—Ç=55555`.
* –í–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è:
    * –¢–µ–∫—É—â–∏–π **—Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞** (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM, –Ω–∞–ø—Ä–∏–º–µ—Ä, `RegistrationStates.waiting_for_age`).
    * –í—Å–µ **—Å–æ–±—Ä–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** –ø–æ –ø—Ä–æ–µ–∫—Ç—É (–¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `state.update_data`, –Ω–∞–ø—Ä–∏–º–µ—Ä, `{'name': 'Alice'}`).

## `FSMContext` (`state`): –í—Ä–µ–º–µ–Ω–Ω—ã–π –î–æ—Å—Ç—É–ø –∫ –ü–∞–ø–∫–µ üìÇüîë

–ö–æ–≥–¥–∞ –≤ `aiogram` –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –∫–æ–ª–±—ç–∫), –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö FSM:

1.  `Dispatcher` —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ `user_id` –∏ `chat_id` –∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
2.  –û–Ω –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É (–∫–∞—Ä—Ç–æ—Ç–µ–∫–µ) –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞–ø–∫—É —Å —è—Ä–ª—ã–∫–æ–º `(user_id, chat_id)`.
3.  –•—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Ö–æ–¥–∏—Ç —ç—Ç—É **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–∞–ø–∫—É**.
4.  –û–±—ä–µ–∫—Ç `state: FSMContext`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –≤–∞—à –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, ‚Äì —ç—Ç–æ **–Ω–µ —Å–∞–º–∞ –ø–∞–ø–∫–∞**, –∞ —Å–∫–æ—Ä–µ–µ **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –∏–ª–∏ **–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª**, –∫–æ—Ç–æ—Ä—ã–π:
    * –ó–Ω–∞–µ—Ç, —Å –∫–∞–∫–æ–π **—É–Ω–∏–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–æ–π** `(user_id, chat_id)` –æ–Ω —Å–≤—è–∑–∞–Ω.
    * –°–æ–¥–µ—Ä–∂–∏—Ç **–∞–∫—Ç—É–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é** –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ —ç—Ç–æ–π –ø–∞–ø–∫–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.
    * –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã (`set_state`, `update_data`, `get_data`, `clear`) –¥–ª—è **–±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã** —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º *–∏–º–µ–Ω–Ω–æ —ç—Ç–æ–π –ø–∞–ø–∫–∏*.

## –ö–∞–∫ –ú–µ—Ç–æ–¥—ã `FSMContext` –†–∞–±–æ—Ç–∞—é—Ç (–ê–Ω–∞–ª–æ–≥–∏—è + –ö–æ–¥)

* **`await state.set_state(SomeState)`:**
    * **–ê–Ω–∞–ª–æ–≥–∏—è:** –í—ã –±–µ—Ä–µ—Ç–µ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –ø–∞–ø–∫–æ–π `(user=123, chat=555)`, –∏ –ø–∏—à–µ—Ç–µ –Ω–∞ –ª–∏—Å—Ç–µ "–°—Ç–∞—Ç—É—Å –ü—Ä–æ–µ–∫—Ç–∞": `SomeState`. –ö–æ–≥–¥–∞ –≤—ã –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Ä–∞–±–æ—Ç—É (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è), —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ –Ω—É–∂–Ω—É—é –ø–∞–ø–∫—É –≤ –∫–∞—Ä—Ç–æ—Ç–µ–∫–µ.
    * **–ö–æ–¥:**
        ```python
        from states import RegistrationStates # –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∑–¥–µ—Å—å

        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 –≤ —á–∞—Ç–µ 555 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /register
        @router.message(Command("register"), StateFilter(None)) # StateFilter(None) - –≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
        async def cmd_register(message: types.Message, state: FSMContext):
            # state –∑–¥–µ—Å—å —Å–≤—è–∑–∞–Ω —Å –∫–ª—é—á–æ–º (user=123, chat=555)
            await message.answer("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:")
            await state.set_state(RegistrationStates.waiting_for_name)
            # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø–∏—Å—å –¥–ª—è (user=123, chat=555)
            # —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º RegistrationStates.waiting_for_name
        ```

* **`await state.update_data(–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ)`:**
    * **–ê–Ω–∞–ª–æ–≥–∏—è:** –ù–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ, —Å–≤—è–∑–∞–Ω–Ω–æ–º —Å –ø–∞–ø–∫–æ–π `(user=123, chat=555)`, –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏–ª–∏ –∏–∑–º–µ–Ω—è–µ—Ç–µ –∑–∞–º–µ—Ç–∫—É: `–ò–º—è = –ê–ª–∏—Å–∞`. –≠—Ç–∞ –∑–∞–º–µ—Ç–∫–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –ø–∞–ø–∫—É `(user=123, chat=555)`.
    * **–ö–æ–¥:**
        ```python
        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 –≤ —á–∞—Ç–µ 555 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç "–ê–ª–∏—Å–∞"
        @router.message(RegistrationStates.waiting_for_name)
        async def process_name(message: types.Message, state: FSMContext):
            # state –∑–¥–µ—Å—å –°–ù–û–í–ê —Å–≤—è–∑–∞–Ω —Å –∫–ª—é—á–æ–º (user=123, chat=555)
            user_name = message.text
            await state.update_data(name=user_name)
            # –í —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è (user=123, chat=555) —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ {'name': '–ê–ª–∏—Å–∞'}
            await message.answer("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–∑—Ä–∞—Å—Ç:")
            await state.set_state(RegistrationStates.waiting_for_age) # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        ```

* **`await state.get_data()`:**
    * **–ê–Ω–∞–ª–æ–≥–∏—è:** –í—ã –ø—Ä–æ—Å–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å –∫–æ–ø–∏—é –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫ —Å —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑–∞–Ω —Å –ø–∞–ø–∫–æ–π `(user=123, chat=555)`.
    * **–ö–æ–¥:**
        ```python
        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 –≤ —á–∞—Ç–µ 555 –≤–≤–æ–¥–∏—Ç –≥–æ—Ä–æ–¥, –∑–∞–≤–µ—Ä—à–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
        @router.message(RegistrationStates.waiting_for_city)
        async def process_city(message: types.Message, state: FSMContext):
            await state.update_data(city=message.text)
            # state –≤—Å–µ –µ—â–µ –¥–ª—è (user=123, chat=555)
            user_data = await state.get_data()
            # user_data –±—É–¥–µ—Ç —Å–ª–æ–≤–∞—Ä–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä: {'name': '–ê–ª–∏—Å–∞', 'age': 30, 'city': '–ú–æ—Å–∫–≤–∞'}
            # –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤–∑—è—Ç—ã –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∫–ª—é—á–∞ (user=123, chat=555)
            await message.answer(f"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: {user_data}")
            await state.clear() # –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ
        ```

* **`await state.clear()`:**
    * **–ê–Ω–∞–ª–æ–≥–∏—è:** –í—ã —Å—Ç–∏—Ä–∞–µ—Ç–µ –≤—Å–µ —Å —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞ –∏ –¥–∞–µ—Ç–µ –∫–æ–º–∞–Ω–¥—É —É–±—Ä–∞—Ç—å –ø–∞–ø–∫—É `(user=123, chat=555)` –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—Ç–µ–∫–∏ (–∏–ª–∏ –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é).
    * **–ö–æ–¥:** (–°–º. –ø—Ä–∏–º–µ—Ä –≤—ã—à–µ). –ü–æ—Å–ª–µ `await state.clear()` —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–ª—é—á–∞ `(user=123, chat=555)`.

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1.  **–î–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–¥–∏–Ω FSM:**
    * –ê–ª–∏—Å–∞ (`user=123`) –≤ —á–∞—Ç–µ `555` –Ω–∞—á–∏–Ω–∞–µ—Ç `/register`. –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–∞–ø–∫–∞ `(123, 555)`. `state` –≤ –µ–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç—É –ø–∞–ø–∫—É.
    * –ë–æ–± (`user=456`) –≤ —á–∞—Ç–µ `777` –Ω–∞—á–∏–Ω–∞–µ—Ç `/register`. –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–∞–ø–∫–∞ `(456, 777)`. `state` –≤ –µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø–∞–ø–∫—É `(456, 777)`.
    * –î–∞–Ω–Ω—ã–µ –ê–ª–∏—Å—ã (`{'name': '–ê–ª–∏—Å–∞'}`) —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –¥–∞–Ω–Ω—ã—Ö –ë–æ–±–∞ (`{'name': '–ë–æ–±'}`). –ù–∏–∫–∞–∫–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞.

2.  **–û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö FSM –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Ç–∞—Ö:**
    * –ê–ª–∏—Å–∞ (`user=123`) –≤ **–ª–∏—á–Ω–æ–º —á–∞—Ç–µ (`555`)** –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–ø–∫–∞ `(123, 555)`.
    * –ê–ª–∏—Å–∞ (`user=123`) –≤ **–≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ (`999`)** –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–∏–∫—Ç–æ—Ä–∏–Ω—É (`/quiz`), –∫–æ—Ç–æ—Ä–∞—è —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FSM (–≤–æ–∑–º–æ–∂–Ω–æ, –¥—Ä—É–≥—É—é `StatesGroup`). –°–æ–∑–¥–∞–µ—Ç—Å—è **–Ω–æ–≤–∞—è –ø–∞–ø–∫–∞** `(123, 999)` –¥–ª—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã.
    * –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`(123, 555)`) –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã (`(123, 999)`), —Ö–æ—Ç—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ.

## –ö–ª—é—á–µ–≤—ã–µ –í—ã–≤–æ–¥—ã

* –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM –≤ `aiogram` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**.
* –£–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –¥–∏–∞–ª–æ–≥–∞ FSM —Å–ª—É–∂–∏—Ç **–∫–æ–º–±–∏–Ω–∞—Ü–∏—è `user_id` –∏ `chat_id`**.
* –û–±—ä–µ–∫—Ç `FSMContext` (`state`), –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, —è–≤–ª—è–µ—Ç—Å—è **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –¥–æ—Å—Ç—É–ø–∞** –∫ –¥–∞–Ω–Ω—ã–º –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—é, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º **–∏–º–µ–Ω–Ω–æ —ç—Ç–æ–º—É `user_id` –∏ `chat_id`**.
* –í–∞–º, –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É, –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ FSM.

–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∏–µ–π –∫–∞—Ä—Ç–æ—Ç–µ–∫–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞ –≤–Ω–µ—Å–ª–æ –±–æ–ª—å—à–µ —è—Å–Ω–æ—Å—Ç–∏ –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ `FSMContext`.
